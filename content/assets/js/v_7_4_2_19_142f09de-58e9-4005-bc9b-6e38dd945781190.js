import{j as e,ap as _,cV as G,bo as H,c_ as $,bt as V}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578110.js";import{u as P}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578119.js";import{a as C}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578188.js";import{a as i}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457814.js";import{c as W,d as q,e as z,a as K,b as J,s as U,g as X,r as Y,m as Z}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781189.js";import{B as R,x as I,D as ee,m as te,G as se,a as re,p as ne,t as k,b as ie}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781215.js";import{at as T,q as O}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578123.js";import{i as w}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457819.js";import{R as oe}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457815.js";import{S as ae}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781217.js";import{d as ce}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781153.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578118.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457816.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457818.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457817.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578135.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781118.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781117.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457812.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457813.js";const A=Symbol("item"),L={type:"idle"},M={type:"dragging"};function D(t){return t[A]===!0}function le({item:t,index:r,instanceId:p}){return{[A]:!0,item:t,index:r,instanceId:p}}const B=i.createContext(null);function de(){const t=i.useContext(B);return w(t!==null),t}const pe=I({flexGrow:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"});function ue({script:t,index:r}){const{getQuickReply:p}=T(),{setScript:n,deleteScript:m}=C(),{close:b}=O(),{language:h}=P(),g=l=>{l.stopPropagation(),m(r),b()};return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[var(--primary-strong)] p-[6px] bg-base-200 rounded-md",children:e.jsx(ce,{size:14})}),t.id.length!==0&&e.jsx("span",{children:e.jsx(_,{type:p(t.id,"type")})}),e.jsx(R,{xcss:pe,children:t.id.length!==0?p(t.id,"titulo"):e.jsx("em",{className:"text-red-500",children:h.selectQuickReply})}),r!==0&&e.jsx("div",{className:"w-10 animate__animated group/item",children:e.jsx("input",{type:"number",className:"w-10 border border-solid rounded-md text-center font-semibold bg-base-200 group-hover/item:border-[var(--primaria)] focus:border-[var(--primaria)]",value:t.timer,min:0,onClick:l=>l.stopPropagation(),onChange:l=>{const j=parseInt(l.target.value);l.target.value.length<=2&&n(r,"timer",j),j<0&&n(r,"timer",0)}})}),e.jsx("span",{className:"animate__animated animate__zoomIn pulse hidden text-red-500 cursor-pointer group-hover:block",onClick:g,children:e.jsx(G,{size:18})})]})}const me=I({position:"relative"}),ge=I({width:"100%",flexShrink:"0",height:"34px",boxSizing:"border-box",display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"space-between",padding:"space.050",position:"relative",borderWidth:"border.width",borderStyle:"solid",borderRadius:"8px",cursor:"grab"}),xe=I({paddingBlock:"space.050",paddingInline:"space.100",borderRadius:"border.radius.100",maxWidth:"360px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),fe=I({opacity:.4});function he({item:t,index:r,position:p}){const{getQuickReply:n}=T(),{open:m}=O(),{setScript:b,quickReply:h}=C(),{registerItem:g,instanceId:x}=de(),l=i.useRef(null),[j,s]=i.useState(null),u=i.useRef(null),[f,a]=i.useState(L);i.useEffect(()=>{const c=l.current,o=u.current;w(c),w(o);const y=le({item:t,index:r,instanceId:x});return W(g({itemId:t.id,element:c}),J({element:o,getInitialData:()=>y,onGenerateDragPreview({nativeSetDragImage:v}){U({nativeSetDragImage:v,getOffset:ne({x:k("space.200","16px"),y:k("space.100","8px")}),render({container:S}){return a({type:"preview",container:S}),()=>a(M)}})},onDragStart(){a(M)},onDrop(){a(L)}}),q({element:c,canDrop({source:v}){return D(v.data)&&v.data.instanceId===x},getData({input:v}){return K(y,{element:c,input:v,allowedEdges:["top","bottom"]})},onDrag({self:v,source:S}){if(S.element===c){s(null);return}const E=z(v.data),N=S.data.index;w(typeof N=="number");const F=r===N-1,Q=r===N+1;if(F&&E==="bottom"||Q&&E==="top"){s(null);return}s(E)},onDragLeave(){s(null)},onDrop(){s(null)}}))},[x,t,r,g]);const d=c=>{m(e.jsx(ae,{ignoredIds:h.script.map(o=>o.id),ignoredTypes:["script"],onSelect:({id:o})=>b(r,"id",o)}),{placement:"left-end"},document.getElementById(`script_${t.id}`),10,{mounted:()=>{var o;return(o=document.getElementById(`script_${t.id}`))==null?void 0:o.classList.add("!border-[var(--primaria)]")},desmouted:()=>{var o;return(o=document.getElementById(`script_${t.id}`))==null?void 0:o.classList.remove("!border-[var(--primaria)]")}})};return e.jsxs(i.Fragment,{children:[e.jsxs(R,{ref:l,xcss:me,children:[e.jsx(ee,{trigger:({triggerRef:c,...o})=>e.jsx("div",{className:"group",ref:te([u,c]),...o,onClick:d,"style-inject":"grid-atlassian",children:e.jsx(se,{id:`script_${t.id}`,alignItems:"center",columnGap:"space.100",templateColumns:"auto 1fr auto",xcss:[ge,f.type==="dragging"&&fe],children:e.jsx(ue,{script:t,index:r})})})}),j&&e.jsx("div",{className:"tema-indicador",children:e.jsx(re,{edge:j,gap:"1px"})})]}),f.type==="preview"&&oe.createPortal(e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"ml-2",children:e.jsx(_,{type:n(t.id,"type")})}),e.jsx(R,{xcss:xe,children:n(t.id,"titulo")})]}),f.container)]})}function ve({index:t,items:r}){return r.length===1?"only":t===0?"first":t===r.length-1?"last":"middle"}function be(){const t=new Map;function r({itemId:n,element:m}){return t.set(n,m),function(){t.delete(n)}}function p(n){return t.get(n)??null}return{register:r,getElement:p}}function je(){const{quickReply:t,sortScript:r}=C(),{close:p}=O(),[{items:n,lastCardMoved:m},b]=i.useState({items:[],lastCardMoved:null}),[h]=i.useState(be);i.useEffect(()=>{b(s=>({...s,items:(t==null?void 0:t.script)||[]}))},[t]);const[g]=i.useState(()=>Symbol("instance-id")),x=i.useCallback(({startIndex:s,indexOfTarget:u,closestEdgeOfTarget:f})=>{const a=X({startIndex:s,closestEdgeOfTarget:f,indexOfTarget:u,axis:"vertical"});a!==s&&(b(d=>{const c=d.items[s];return{items:Y({list:d.items,startIndex:s,finishIndex:a}),lastCardMoved:{item:c,previousIndex:s,currentIndex:a,numberOfItems:d.items.length}}}),p(),r({oldIndex:s,newIndex:a}))},[]);i.useEffect(()=>Z({canMonitor({source:s}){return D(s.data)&&s.data.instanceId===g},onDrop({location:s,source:u}){const f=s.current.dropTargets[0];if(!f)return;const a=u.data,d=f.data;if(!D(a)||!D(d))return;const c=n.findIndex(y=>y.id===d.item.id);if(c<0)return;const o=z(d);x({startIndex:a.index,indexOfTarget:c,closestEdgeOfTarget:o})}}),[g,n,x]),i.useEffect(()=>{if(m===null)return;const{item:s,previousIndex:u,currentIndex:f,numberOfItems:a}=m,d=h.getElement(s.id);d&&ie(d)},[m,h]);const l=i.useCallback(()=>n.length,[n.length]),j=i.useMemo(()=>({registerItem:h.register,reorderItem:x,instanceId:g,getListLength:l}),[h.register,x,g,l]);return e.jsx(B.Provider,{value:j,children:e.jsx("div",{className:"pb-1 flex flex-col gap-[6px]",children:n.map((s,u)=>e.jsx(he,{item:s,index:u,position:ve({index:u,items:n})},s.id))})})}function $e(){const{language:t}=P(),{addScript:r}=C();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{children:t.script}),e.jsx("div",{className:"cursor-pointer lg:tooltip lg:tooltip-bottom before:!w-[120px]","data-tip":t.scriptIncludeTypingAudio,children:e.jsx("div",{className:"pulse text-[var(--icon)]",children:e.jsx(H,{size:20})})}),e.jsx("div",{className:"cursor-pointer lg:tooltip lg:tooltip-bottom before:!w-[120px]","data-tip":t.script_reorganize,children:e.jsx("div",{className:"pulse text-[var(--icon)] pb-[2px]",children:e.jsx($,{size:17})})})]}),e.jsx("div",{children:e.jsx("h2",{children:t.intervalo})})]}),e.jsx(je,{}),e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("div",{onClick:r,className:"cursor-pointer lg:tooltip lg:tooltip-top","data-tip":t.addMoreQuickReply,children:e.jsx("div",{className:"pulse",children:e.jsx(V,{size:30,className:"text-[var(--primaria)]"})})})})]})}export{$e as default};
