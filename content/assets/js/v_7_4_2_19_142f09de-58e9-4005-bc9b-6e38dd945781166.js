import{j as e,bo as R,a1 as T,cO as _,a7 as N,a2 as k,b5 as $,as as D,a4 as C,aL as E,cP as B,cQ as G,cR as q,X as H,bg as V,I as S}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578110.js";import{a as v}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457814.js";import{a_ as y,b as W,q as O,c as Q,a$ as X,p as J,s as K}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578123.js";import{u as w,b as M}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578119.js";import{F as I}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578144.js";import{U as Y}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578169.js";import{W as Z}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578118.js";import{A as ee}from"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781192.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457818.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457815.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457817.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457816.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457819.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457812.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd9457813.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578121.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578145.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781103.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781123.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578128.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578137.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578158.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781104.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781105.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578127.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd94578136.js";import"./v_7_4_2_19_142f09de-58e9-4005-bc9b-6e38dd945781106.js";function se(){const{activeColapse:n,setActiveColapse:u,activeFollowUp:s,setTimingAcionamento:p,setDispararAcionamento:c}=y(),{language:t}=w(),[r,m]=v.useState(s.acionamento.timing.days),[i,d]=v.useState(s.acionamento.timing.hours),[o,x]=v.useState(s.acionamento.timing.minutes|5);v.useEffect(()=>{p({days:r,hours:i,minutes:o})},[r,i,o,p]);const h=()=>{const l=String(i).padStart(2,"0"),b=String(o).padStart(2,"0");return`${l}:${b}`},f=()=>{let l="";return r===1?l=r+" "+t.day:r>1&&(l=r+" "+t.days),r&&(i||o)&&(l+=" "+t.and+" "),i!==0?l+=" "+h()+" "+t.hours:o!==0&&(l+=" "+o+" "+t.minutes),l},j=e.jsxs("div",{className:"flex flex-col gap-2 justify-center items-start mt-2",children:[e.jsxs("div",{className:"flex text-sm font-bold",children:[e.jsx("span",{children:t.setActionTime}),e.jsx("span",{className:"ml-1 cursor-pointer lg:tooltip lg:tooltip-right","data-tip":t.tooltipSetActionTime,children:e.jsx("span",{className:"pulse",children:e.jsx(R,{className:"w-5 h-5 text-[var(--primaria)]"})})})]}),e.jsxs("div",{className:"flex flex-row gap-4 justify-center items-center w-full px-1",children:[e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label !pb-[2px]",children:e.jsx("h4",{className:"font-semibold",children:`${t.days}:`})}),e.jsx("input",{id:"dias",type:"number",placeholder:t.days,min:"0",value:r===0?"":r,onChange:l=>{const b=l.target.value===""?0:Number(l.target.value);m(b)},className:"input input-bordered w-full input-sm"})]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label !pb-[2px]",children:e.jsx("h4",{className:"font-semibold",children:`${t.hours}:`})}),e.jsx("input",{id:"horas",type:"time",placeholder:t.hours,value:h(),onChange:l=>{const[b,a]=l.target.value.length!==0?l.target.value.split(":"):["00","05"];d(parseInt(b,10)),x(parseInt(a,10))},className:"input input-bordered w-full input-sm"})]})]}),e.jsx("div",{className:"text-center p-1 m-auto",children:e.jsxs(T,{weight:"600",size:"16px",children:[t.dispartAcionamento," ",f()," ",t.dispartAcionamentoAfter]})}),e.jsxs("div",{role:"alert",className:"alert alert-info mt-2",style:{zoom:"80%"},children:[e.jsx(_,{className:"w-7 h-7"}),e.jsxs("span",{className:"font-semibold",style:{fontSize:"17px"},children:[t.actionVerifyEvery5Minutes,". ",t.actionVerifyDes]})]})]});return e.jsxs("div",{className:"collapse collapse-arrow shadow-md border border-solid border-[var(--intro-background)] min-h-[54px] "+(n==="acionamento"?"":"bg-base-200"),children:[e.jsx("input",{type:"radio",name:"my-accordion-2",checked:n==="acionamento",onChange:()=>u("acionamento")}),e.jsx("div",{className:"collapse-title text-xl font-bold",children:t.actionFollowUp}),e.jsx("div",{className:"collapse-content",children:e.jsxs("div",{className:"gap-2 h-full overflow-y-auto",children:[e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(N,{id:"dispararAoEntrar",estado:s.acionamento.type==="dispararAoEntrar",checkedUpdade:()=>c("dispararAoEntrar")}),e.jsx("span",{className:"label-text",children:t.dispatchImediatellyEnterFunil})]}),e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(N,{id:"dispararAoSair",estado:s.acionamento.type==="dispararAoSair",checkedUpdade:()=>c("dispararAoSair")}),e.jsx("span",{className:"label-text",children:t.dispatchImediatellyLeaveFunil})]}),e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(N,{id:"timing",estado:s.acionamento.type==="timing",checkedUpdade:()=>c("timing")}),e.jsx("span",{className:"label-text",children:t.dispatchTime})]}),s.acionamento.type==="timing"&&j]})})]})}function ae(){var d,o,x,h,f,j,g,l,b;const{activeColapse:n,setActiveColapse:u,activeFollowUp:s,setRegraUpdate:p,setRegrasUpdateAssinatura:c,setAssinaturaName:t}=y(),{language:r}=w(),m=s.regras.assinatura.propriedades;return e.jsxs("div",{className:"collapse collapse-arrow shadow-md border border-solid border-[var(--intro-background)] min-h-[54px] "+(n==="regras"?"":"bg-base-200"),children:[e.jsx("input",{type:"radio",name:"my-accordion-2",checked:n==="regras",onChange:()=>u("regras")}),e.jsx("div",{className:"collapse-title text-xl font-bold",children:r.regrasDeAcionamento}),e.jsx("div",{className:"collapse-content",children:e.jsxs("div",{className:"gap-2 h-full overflow-y-auto",children:[e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(N,{id:((o=(d=s==null?void 0:s.regras)==null?void 0:d.cancelAfterChat)==null?void 0:o.type)||"cancelAfterChat",estado:((f=(h=(x=s==null?void 0:s.regras)==null?void 0:x.cancelAfterChat)==null?void 0:h.propriedades)==null?void 0:f.active)||!1,checkedUpdade:()=>p("cancelAfterChat")}),e.jsx("span",{className:"label-text",children:r.cancelAfterChat})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(N,{id:((g=(j=s==null?void 0:s.regras)==null?void 0:j.responderGrupos)==null?void 0:g.type)||"responderGrupos",estado:s.regras.responderGrupos.propriedades.active||!1,checkedUpdade:()=>p("responderGrupos")}),e.jsx("span",{className:"label-text",children:r.permitirResponderEmGrupos})]})}),e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(N,{id:((b=(l=s==null?void 0:s.regras)==null?void 0:l.assinatura)==null?void 0:b.type)||"assinatura",estado:m.active||!1,checkedUpdade:()=>p("assinatura")}),e.jsx("span",{className:"label-text",children:r.personalizarOuDesativarAss})]}),m.active&&e.jsxs("div",{className:"flex flex-col pl-6 gap-0.5",children:[e.jsxs("label",{className:"label !p-0 max-w-xs",htmlFor:"desativarAss",children:[e.jsx("span",{className:"mr-3 font-bold text-base",children:r.desativarAss}),e.jsx(k,{id:"desativarAss",estado:m.desativarAss,switchUpdate:()=>c("desativarAss"),corPrimaria:!0,zoom:{zoom:"85%"}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label !p-0 max-w-xs",htmlFor:"persAss",children:[e.jsx("span",{className:"mr-3 font-bold text-base",children:r.personalizarNomeAss}),e.jsx(k,{id:"persAss",estado:m.persAss.active,switchUpdate:()=>c("persAss"),corPrimaria:!0,disabled:m.desativarAss,zoom:{zoom:"85%"}})]}),m.persAss.active&&e.jsxs("label",{className:"input input-bordered border border-solid input-sm flex items-center gap-2 w-full max-w-xs mt-1",children:[e.jsx($,{fill:"currentColor",className:"h-4 w-4 opacity-70"}),e.jsx("input",{type:"text",placeholder:r.insiraNomeAss,value:m.persAss.nameAss,onChange:a=>t(a.target.value),className:"grow"})]})]})]})]})]})})]})}const z=({id:n,name:u,estado:s,fn:p,icon:c})=>e.jsx("div",{className:"w-full",children:e.jsx("label",{htmlFor:n,children:e.jsxs("div",{className:"flex gap-1 items-center cursor-pointer",children:[e.jsx(N,{id:n,estado:s,checkedUpdade:p}),e.jsx(T,{children:u}),c]})})});function te(){const{addAbaInFunil:n,addLabelInFunil:u,LabelOrTabIsExist:s,activeTabOrLabel:p,setActiveTabOrLabel:c,removeLabelInFunil:t,removeAbaInFunil:r}=y(),{language:m}=w(),{isBusiness:i}=M(),{userTabs:d}=W(),{close:o}=O(),[x,h]=v.useState([]);v.useEffect(()=>{(async()=>{const a=await Z.Labels("getAllLabels");h(a)})()},[]);const f=["labels","userTabs"],j=Y(),g=(a,F,U)=>{var L;if(s(a))F==="labels"?t(a):r(a);else if(F==="labels"){const A=x.find(P=>P.id===a);u({...A,chats:[]})}else n({id:a,tag:U.tag,type:"aba",chats:((L=U.chats)==null?void 0:L.map(A=>({...A,date:null})))||[]})},l={labels:x.map(a=>e.jsx(z,{id:a.id,name:a.name,estado:s(a.id),fn:()=>g(a.id,"labels"),icon:e.jsx(E,{size:20,style:{color:a.hexColor}})})),userTabs:d.length!==0?d.map(a=>e.jsx(z,{id:a.id,name:a.tag,estado:s(a.id),fn:()=>g(a.id,"userTabs",a),icon:e.jsx(D,{size:20,className:"text-[var(--primaria)]"})})):e.jsx("div",{className:"m-auto",children:e.jsx(C,{name:m.create,funcao:()=>{o(),j()}})})};return e.jsxs("div",{className:"w-[350px] p-3 !pt-0",children:[e.jsx("div",{className:"tabs tabs-bordered mt-4",children:f.map(a=>{if(!(!i&&a==="labels"))return e.jsxs("label",{className:"tab "+(a===p?"tab-activeTabOrLabel !border-[var(--primaria)]":""),htmlFor:a,children:[e.jsx("span",{children:m["filter_"+a]}),e.jsx("input",{id:a,type:"checkbox",checked:a===p,onChange:()=>c(a),className:"hidden"})]})})}),e.jsx("div",{className:"flex gap-1 flex-col mt-4 overflow-y-auto",style:{maxHeight:"30vh"},children:l[p]})]})}function le(){const{removeAbaInFunil:n,removeLabelInFunil:u,activeFollowUp:s}=y(),{open:p}=O(),{language:c}=w(),{isBusiness:t}=M(),r=[...(s.funil.abas||[]).map(i=>({...i,type:"aba"})),...(s.funil.etiquetas||[]).map(i=>({...i,type:"etiqueta"}))],m=i=>{const d=i.currentTarget;p(e.jsx(te,{}),{placement:"bottom"},d,10,{mounted:()=>d.setAttribute("style","outline: 2px solid hsl(var(--bc) / 0.2); outline-offset: 2px;"),desmouted:()=>d.removeAttribute("style")})};return e.jsxs("div",{className:"flex flex-col gap-2 shadow-md border border-solid border-[var(--intro-background)] p-2 rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(B,{className:"w-5 h-5 text-[var(--primaria)]"}),e.jsx("h2",{className:"text-lg",children:t?c.selectTabAndLabel:c.selectTab})]})}),e.jsx("div",{className:"form-control w-full",children:e.jsx("div",{className:"select select-bordered select-sm !cursor-pointer border border-solid",onClick:m,children:t?c.clickToAddTabAndLabel:c.clickToAddTab})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[r.length>0&&e.jsx("span",{className:"font-bold text-base",children:`${t?c.addTabAndLabel:c.addTab}:`}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:r.map(i=>{const d=i.type==="etiqueta",o=d?E:G,x=d?i.name:i.tag,h=d?u:n,f=d?i.hexColor:"var(--primaria)";return e.jsxs("div",{className:"flex items-center gap-1.5 py-1 px-2 border border-solid rounded-xl pulse group cursor-pointer",style:{borderColor:f},role:"button",tabIndex:0,onClick:()=>h(i.id),children:[e.jsx(o,{className:"w-4 h-4",style:{color:f}}),e.jsx("span",{children:x}),e.jsx("span",{className:"group-hover:block hidden text-red-500",children:e.jsx(q,{size:18})})]},i.id)})})]})]})}function re(){const{activeColapse:n,setActiveColapse:u}=y(),{language:s}=w();return e.jsxs("div",{className:`collapse collapse-arrow shadow-md border min-h-[54px] ${n==="funil"?"":"bg-base-200"}`,children:[e.jsx("input",{type:"radio",name:"my-accordion-2",checked:n==="funil",onChange:()=>{u("funil")}}),e.jsx("div",{className:"collapse-title text-xl font-bold",children:s.funilConfig}),e.jsx("div",{className:"collapse-content",children:e.jsx("div",{className:"gap-2 h-full overflow-y-auto",children:e.jsx(le,{})})})]})}function Ee(){var j,g;const{model:n,activeFollowUp:u,activeColapse:s,setActiveFollowUp:p,validateFollowUp:c,setResetDefaultFollowUp:t}=y(),{createFollowUp:r,editFollowUp:m}=Q(),{clearAcao:i}=X(),{open:d}=J(),{language:o}=w(),x=K(l=>l.label);v.useEffect(()=>()=>i(),[]);const h=async()=>{const{success:l,message:b}=c();if(!l){S({type:"Error",message:b,position:"top-right"});return}n==="Create"?r(u):m(u),S({type:"Success",message:n==="Create"?o.followUpCreatedSuccess:o.followUpEditedSuccess,position:"top-right"}),t(),d(e.jsx(I,{}))};return e.jsxs("div",{className:"w-[800px] max-h-[99.5vh] overflow-y-auto flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs(H,{children:[n==="Create"?o.create:o.edit," ",o.followUp]}),((g=(j=x.videos_tutoriais)==null?void 0:j.follow_up)==null?void 0:g.length)>0&&e.jsx(V,{funcao:()=>window.open(x.videos_tutoriais.follow_up,"_blank")})]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label !pb-[1px]",children:e.jsx(T,{children:o.nameFollowUp})}),e.jsx("input",{type:"text",placeholder:o.insertNameFollowUp,className:"input input-bordered w-full input-sm",value:u.nome,onChange:l=>p("nome",l.target.value)})]}),e.jsx(re,{}),e.jsx(se,{}),e.jsx(ee,{acaoModel:"useAcaoFollowUp",placement:"right",openCollapse:s==="script"}),e.jsx(ae,{}),e.jsxs("div",{className:"flex justify-between pt-4 resize-none",children:[e.jsx(C,{name:o.cancel,funcao:()=>{t(),d(e.jsx(I,{}))}}),e.jsx(C,{name:n==="Create"?o.create:o.edit,funcao:h})]})]})}export{Ee as default};
